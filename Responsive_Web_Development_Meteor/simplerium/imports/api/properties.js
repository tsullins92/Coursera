import { Meteor } from 'meteor/meteor';
import { Mongo } from 'meteor/mongo';
import { check } from 'meteor/check';
import { Random } from 'meteor/random';

export const Properties = new Mongo.Collection('properties');
 
if (Meteor.isServer) {
  // This code only runs on the server
  // Only publish properties that are public or belong to the current user
  Meteor.publish('properties', function propertiesPublication() {
    return Properties.find({owner: this.userId});
  });
}
 

Meteor.methods({
  'properties.insert'(name, address='', image="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") {
    check(name, String);
 		check(address, String);
 		check(image, String);
    // Make sure the user is logged in before inserting a task
    if (! Meteor.userId()) {
      throw new Meteor.Error('not-authorized');
    }
    Properties.insert({
      name: name,
      address: address,
      image: image,
      createdAt: new Date(),
      owner: Meteor.userId(),
      username: Meteor.user().username,
    });
  },
  'properties.remove'(propertyId) {
  	console.log(propertyId);
    check(propertyId, String);
    const property = Properties.findOne(propertyId);
    if (property.owner !== Meteor.userId()) {
      // If the task is private, make sure only the owner can delete it
      throw new Meteor.Error('not-authorized');
    }
    Properties.remove(propertyId);
  },
  'transactions.insert'(propertyID, transactionDate, description, vendor, amount, hasReceipt, receiptImage="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") {
    check(propertyID,String);
    check(transactionDate,Date);
    check(description,String);
    check(vendor,String);
    check(amount,Number);
    check(hasReceipt,Boolean);
    check(receiptImage,String);
    // Make sure the user is logged in before inserting a task
    if (! Meteor.userId()) {
      throw new Meteor.Error('not-authorized');
    }
    const property = Properties.findOne(propertyID);
 
    // Make sure only the task owner can make a task private
    if (property.owner !== Meteor.userId()) {
      throw new Meteor.Error('not-authorized');
    }
    Properties.update(
      {_id:propertyID},
      {$push: 
        {
        transactions:
          {
            _transactionID: Random.id(),
            transactionDate: transactionDate,
            description: description,
            vendor: vendor,
            amount: amount,
            hasReceipt: hasReceipt,
            receiptImage: receiptImage,
            createdAt: new Date(),
            owner: Meteor.userId(),
            username: Meteor.user().username,
          }  
        }
      }
    );
  },
  'transactions.remove'(propertyID, transactionID) {
    check(propertyID, String);
    check(transactionID, String);
/*    const transaction = Properties.findOne(propertyID).transactions.find({_transactionID: transactionID});
*/    
    const property = Properties.findOne(propertyID);
    if (property.owner !== Meteor.userId()) {
      // If the task is private, make sure only the owner can delete it
      throw new Meteor.Error('not-authorized');
    }
    console.log(propertyID,transactionID);
    Properties.update(
      {_id:propertyID},
      {$pull: {transactions: {_transactionID: transactionID}}}
    );
  },
/*  'properties.setChecked'(propertyId, setChecked) {
    check(taskId, String);
    check(setChecked, Boolean);

    const task = Properties.findOne(taskId);
    if (task.private && task.owner !== Meteor.userId()) {
      // If the task is private, make sure only the owner can check it off
      throw new Meteor.Error('not-authorized');
    }
 
    Properties.update(taskId, { $set: { checked: setChecked } });
  },
  'properties.setPrivate'(taskId, setToPrivate) {
    check(taskId, String);
    check(setToPrivate, Boolean);
 
    const task = Properties.findOne(taskId);
 
    // Make sure only the task owner can make a task private
    if (task.owner !== Meteor.userId()) {
      throw new Meteor.Error('not-authorized');
    }
 
    Properties.update(taskId, { $set: { private: setToPrivate } });
  },*/
});